import Tab from '@components/markdown/Tab.astro';
import Tabs from '@components/markdown/Tabs.astro';
import Callout from '@components/markdown/Callout.astro';
import Section from '@components/markdown/Section.astro';

# ç´¢å¼•å’Œçº¦æŸ

## çº¦æŸ

SQL çº¦æŸæ˜¯å¯¹è¡¨åˆ—æ–½åŠ çš„è§„åˆ™ã€‚å®ƒä»¬ç”¨äºé˜²æ­¢æ— æ•ˆæ•°æ®è¿›å…¥æ•°æ®åº“ã€‚

è¿™å¯ä»¥ç¡®ä¿æ•°æ®åº“ä¸­çš„æ•°æ®çš„å‡†ç¡®æ€§å’Œå¯é æ€§ã€‚

### é»˜è®¤å€¼

`DEFAULT` å­å¥æŒ‡å®šå¦‚æœç”¨æˆ·åœ¨è¿›è¡Œ `INSERT` æ“ä½œæ—¶æœªæä¾›å€¼ï¼Œåˆ™åœ¨åˆ—ä¸Šä½¿ç”¨çš„é»˜è®¤å€¼ã€‚å¦‚æœåˆ—å®šä¹‰ä¸é™„åŠ æ˜¾å¼çš„ `DEFAULT` å­å¥ï¼Œåˆ™åˆ—çš„é»˜è®¤å€¼ä¸º `NULL`ã€‚

æ˜¾å¼çš„ `DEFAULT` å­å¥å¯ä»¥æŒ‡å®šé»˜è®¤å€¼ä¸º `NULL`ï¼Œå­—ç¬¦ä¸²å¸¸é‡ï¼ŒBlob å¸¸é‡ï¼Œæœ‰ç¬¦å·æ•°æˆ–ç”¨æ‹¬å·æ‹¬èµ·æ¥çš„ä»»ä½•å¸¸é‡è¡¨è¾¾å¼ã€‚

<Tabs items={['PostgreSQL', 'MySQL', 'SQLite']}>
  <Tab>
    <Section>
    ```typescript
    import { sql } from "drizzle-orm";
    import { integer, uuid, pgTable } from "drizzle-orm/pg-core";

    const table = pgTable('table', {
      integer1: integer('integer1').default(42),
      integer2: integer('integer2').default(sql`'42'::integer`),
      uuid1: uuid('uuid1').defaultRandom(),
      uuid2: uuid('uuid2').default(sql`gen_random_uuid()`),
    });
    ```

    ```sql
    CREATE TABLE IF NOT EXISTS "table" (
      "integer1" integer DEFAULT 42,
      "integer2" integer DEFAULT '42'::integer,
      "uuid1" uuid DEFAULT gen_random_uuid(),
      "uuid2" uuid DEFAULT gen_random_uuid()
    );
    ```
    </Section>

  </Tab> 
  <Tab>
    <Section>
    ```typescript
    import { sql } from "drizzle-orm";
    import { int, time, mysqlTable } from "drizzle-orm/mysql-core";
    
    const table = mysqlTable("table", {
      int: int("int").default(42),
      time: time("time").default(sql`cast("14:06:10" AS TIME)`),
    });
    ```
    ```sql
    CREATE TABLE `table` (
      `int` int DEFAULT 42,
      `time` time DEFAULT cast("14:06:10" AS TIME)
    );
    ```
    </Section>
  </Tab>
  <Tab>
    <Section>
    ```typescript
    import { sql } from "drizzle-orm";
    import { integer, sqliteTable } from "drizzle-orm/sqlite-core";

    const table = sqliteTable('table', {
      int1: integer('int1').default(42),
      int2: integer('int2').default(sql`(abs(42))`)
    });

    ```
    ```sql
    CREATE TABLE `table` (
      `int1` integer DEFAULT 42
      `int2` integer DEFAULT (abs(42))
    );
    ```
    </Section>

  </Tab>
</Tabs>

### éç©º

é»˜è®¤æƒ…å†µä¸‹ï¼Œåˆ—å¯ä»¥å­˜å‚¨ **NULL** å€¼ã€‚`NOT NULL` çº¦æŸå¼ºåˆ¶åˆ— **ä¸** æ¥å— **NULL** å€¼ã€‚

è¿™å°†ç¡®ä¿å­—æ®µå§‹ç»ˆåŒ…å«ä¸€ä¸ªå€¼ï¼Œè¿™æ„å‘³ç€æ‚¨æ— æ³•æ’å…¥æ–°è®°å½•æˆ–æ›´æ–°è®°å½•è€Œä¸ç»™æ­¤å­—æ®µæ·»åŠ å€¼ã€‚

<Tabs items={['PostgreSQL', 'MySQL', 'SQLite']}>
  <Tab>
    <Section>
      ```typescript copy
      import { integer, pgTable } from "drizzle-orm/pg-core";

      const table = pgTable('table', {
        integer: integer('integer').notNull(),
      });
      ```

      ```sql
      CREATE TABLE IF NOT EXISTS "table" (
        "integer" integer NOT NULL,
      );
      ```
    </Section>

  </Tab> 
  <Tab>
    <Section>
      ```typescript
      import { int, mysqlTable } from "drizzle-orm/mysql-core";

      const table = mysqlTable('table', {
        int: int('int').notNull(),
      });
      ```

      ```sql
      CREATE TABLE `table` (
        `int` int NOT NULL,
      );
      ```
    </Section>

  </Tab>
  <Tab>
   <Section>
      ```typescript copy
      const table = sqliteTable('table', { 
        numInt: integer('numInt').notNull() 
      });
      ```
 
      ```sql
      CREATE TABLE table (
        `numInt` integer NOT NULL
      );
      ```
    </Section>

  </Tab>
</Tabs>

### å”¯ä¸€æ€§

`UNIQUE` çº¦æŸç¡®ä¿åˆ—ä¸­çš„æ‰€æœ‰å€¼éƒ½æ˜¯ä¸åŒçš„ã€‚

`UNIQUE` çº¦æŸå’Œ `PRIMARY KEY` çº¦æŸéƒ½ä¸ºåˆ—æˆ–ä¸€ç»„åˆ—æä¾›äº†å”¯ä¸€æ€§ä¿è¯ã€‚

`PRIMARY KEY` çº¦æŸè‡ªåŠ¨å…·æœ‰ `UNIQUE` çº¦æŸã€‚

<Callout type="info" emoji="â„¹ï¸">
  æ¯ä¸ªè¡¨å¯ä»¥æœ‰å¤šä¸ª `UNIQUE` çº¦æŸï¼Œä½†æ¯ä¸ªè¡¨åªèƒ½æœ‰ä¸€ä¸ª `PRIMARY KEY` çº¦æŸã€‚
</Callout>

<Tabs items={['PostgreSQL', 'MySQL', 'SQLite']}>
  <Tab>
    <Section>
      ```typescript copy
      import { integer, text, unique, pgTable } from "drizzle-orm/pg-core";

      export const user = pgTable('user', {
        id: integer('id').unique(),
      });

      export const table = pgTable('table', {
        id: integer('id').unique('custom_name'),
      });

      export const composite = pgTable('composite_example', {
        id: integer('id'),
        name: text('name'),
      }, (t) => ({
        unq: unique().on(t.id, t.name),
        unq2: unique('custom_name').on(t.id, t.name)
      }));

      // In Postgres 15.0+ NULLS NOT DISTINCT is available
      // This example demonstrates both available usages
      export const userNulls = pgTable('user_nulls_example', {
        id: integer('id').unique("custom_name", { nulls: 'not distinct' }),
      }, (t) => ({
        unq: unique().on(t.id).nullsNotDistinct()
      }));
      ```

      ```sql
      CREATE TABLE IF NOT EXISTS "composite_example" (
	    "id" integer,
        "name" text,
        CONSTRAINT "composite_example_id_name_unique" UNIQUE("id","name"),
        CONSTRAINT "custom_name" UNIQUE("id","name")
      );

      CREATE TABLE IF NOT EXISTS "table" (
      	"id" integer,
      	CONSTRAINT "custom_name" UNIQUE("id")
      );

      CREATE TABLE IF NOT EXISTS "user" (
      	"id" integer,
      	CONSTRAINT "user_id_unique" UNIQUE("id")
      );

      CREATE TABLE IF NOT EXISTS "user_nulls_example" (
	    "id" integer,
	    CONSTRAINT "custom_name" UNIQUE NULLS NOT DISTINCT("id"),
	    CONSTRAINT "user_nulls_example_id_unique" UNIQUE NULLS NOT DISTINCT("id")
      );
      ```
    </Section>

  </Tab> 
  <Tab>
    <Section>
      ```typescript
      import { int, varchar, unique, mysqlTable } from "drizzle-orm/mysql-core";

      export const user = mysqlTable('user', {
        id: int('id').unique(),
      });

      export const table = mysqlTable('table', {
        id: int('id').unique('custom_name'),
      });

      export const composite = mysqlTable('composite_example', {
        id: int('id'),
        name: varchar('name', { length: 256 }),
      }, (t) => ({
        unq: unique().on(t.id, t.name),
        unq2: unique('custom_name').on(t.id, t.name)
      }));
      ```

      ```sql
      CREATE TABLE `user` (
      	`id` int,
      	CONSTRAINT `user_id_unique` UNIQUE(`id`)
      );

      CREATE TABLE `table` (
      	`id` int,
      	CONSTRAINT `custom_name` UNIQUE(`id`)
      );

      CREATE TABLE `composite_example` (
	    `id` int,
	    `name` varchar(256),
	    CONSTRAINT `composite_example_id_name_unique` UNIQUE(`id`,`name`),
	    CONSTRAINT `custom_name` UNIQUE(`id`,`name`)
      );
      ```
    </Section>

  </Tab>
  <Tab>
   <Section>
      ```typescript copy
      import { int, text, unique, sqliteTable } from "drizzle-orm/sqlite-core";

      export const user = sqliteTable('user', {
        id: int('id').unique(),
      });

      export const table = sqliteTable('table', {
        id: int('id').unique('custom_name'),
      });

      export const composite = sqliteTable('composite_example', {
        id: int('id'),
        name: text('name'),
      }, (t) => ({
        unq: unique().on(t.id, t.name),
        unq2: unique('custom_name').on(t.id, t.name)
      }));
      ```

      ```sql
      CREATE TABLE `user` (
	      `id` integer
      );

      CREATE TABLE `table` (
      	`id` integer
      );

      CREATE TABLE `composite_example` (
      	`id` integer,
      	`name` text
      );

      CREATE UNIQUE INDEX `composite_example_id_name_unique` ON `composite_example` (`id`,`name`);
      CREATE UNIQUE INDEX `custom_name` ON `composite_example` (`id`,`name`);
      CREATE UNIQUE INDEX `custom_name` ON `table` (`id`);
      CREATE UNIQUE INDEX `user_id_unique` ON `user` (`id`);
      ```
    </Section>

  </Tab>
</Tabs>

### æ£€æŸ¥æ¡ä»¶

`CHECK` çº¦æŸç”¨äºé™åˆ¶å¯æ”¾ç½®åœ¨åˆ—ä¸­çš„å€¼èŒƒå›´ã€‚

å¦‚æœåœ¨åˆ—ä¸Šå®šä¹‰äº† `CHECK` çº¦æŸï¼Œå®ƒå°†ä»…å…è®¸ä¸ºæ­¤åˆ—æŒ‡å®šçš„æŸäº›å€¼ã€‚

å¦‚æœåœ¨è¡¨ä¸Šå®šä¹‰äº† `CHECK` çº¦æŸï¼Œå®ƒå¯ä»¥æ ¹æ®è¡Œä¸­å…¶ä»–åˆ—çš„å€¼æ¥é™åˆ¶ç‰¹å®šåˆ—ä¸­çš„å€¼ã€‚

<Callout type="error" emoji="ğŸ›‘">
  DRIZZLE ORM å°šæœªå®ç°æ­¤åŠŸèƒ½
</Callout>

### ä¸»é”®

`PRIMARY KEY` çº¦æŸå”¯ä¸€æ ‡è¯†è¡¨ä¸­çš„æ¯æ¡è®°å½•ã€‚
ä¸»é”®å¿…é¡»åŒ…å« `UNIQUE` å€¼ï¼Œå¹¶ä¸”ä¸èƒ½åŒ…å« `NULL` å€¼ã€‚

ä¸€ä¸ªè¡¨åªèƒ½æœ‰ **ä¸€ä¸ª** ä¸»é”®ï¼›å¹¶ä¸”åœ¨è¯¥è¡¨ä¸­ï¼Œæ­¤ä¸»é”®å¯ä»¥ç”±å•ä¸ªå­—æ®µæˆ–å¤šä¸ªå­—æ®µç»„æˆã€‚

<Tabs items={['PostgreSQL', 'MySQL', 'SQLite']}>
  <Tab>
    <Section>
      ```typescript copy
      import { serial, text, pgTable } from "drizzle-orm/pg-core";

      const user = pgTable('user', {
        id: serial('id').primaryKey(),
      });

      const table = pgTable('table', {
        id: text('cuid').primaryKey(),
      });
      ```

      ```sql
      CREATE TABLE IF NOT EXISTS "user" (
        "id" serial PRIMARY KEY,
      );

      CREATE TABLE IF NOT EXISTS "table" (
        "cuid" text PRIMARY KEY,
      );
      ```
    </Section>

  </Tab> 
  <Tab>
    <Section>
      ```typescript
      import { int, text, mysqlTable } from "drizzle-orm/mysql-core";

      export const user = mysqlTable("user", {
        id: int("id").autoincrement().primaryKey(),
      })

      export const table = mysqlTable("table", {
        cuid: text("cuid").primaryKey(),
      })
      ```

      ```sql
      CREATE TABLE `user` (
        `id` int AUTO_INCREMENT PRIMARY KEY NOT NULL
      );

      CREATE TABLE `table` (
        `cuid` text PRIMARY KEY NOT NULL
      );
      ```
    </Section>

  </Tab>
  <Tab>
   <Section>
      ```typescript copy
      import { integer, sqliteTable } from "drizzle-orm/sqlite-core";

      export const user = sqliteTable("user", {
        id: integer("id").primaryKey(),
      })

      export const pet = sqliteTable("pet", {
        id: integer("id").primaryKey(),
      })
      ```

      ```sql
      CREATE TABLE `user` (
          `id` integer PRIMARY KEY AUTOINCREMENT NOT NULL
      );

      CREATE TABLE `pet` (
          `id` integer PRIMARY KEY AUTOINCREMENT
      )
      ```
    </Section>

  </Tab>
</Tabs>

### å¤åˆä¸»é”®

ä¸ `PRIMARY KEY` ç±»ä¼¼ï¼Œå¤åˆä¸»é”®ä½¿ç”¨å¤šä¸ªå­—æ®µåœ¨è¡¨ä¸­å”¯ä¸€æ ‡è¯†æ¯æ¡è®°å½•ã€‚

Drizzle ORM æä¾›äº†ä¸€ä¸ªç‹¬ç«‹çš„ `primaryKey` è¿ç®—ç¬¦æ¥å®ç°è¿™ä¸€ç‚¹ï¼š
<Tabs items={['PostgreSQL', 'MySQL', 'SQLite']}>
  <Tab>
    <Section>
      ```typescript copy {18, 19}
      import { serial, text, integer, primaryKey, pgTable } from "drizzle-orm/pg-core";

      export const user = pgTable("user", {
        id: serial("id").primaryKey(),
        name: text("name"),
      });

      export const book = pgTable("book", {
        id: serial("id").primaryKey(),
        name: text("name"),
      });

      export const booksToAuthors = pgTable("books_to_authors", {
        authorId: integer("author_id"),
        bookId: integer("book_id"),
      }, (table) => {
        return {
          pk: primaryKey({ columns: [table.bookId, table.authorId] }),
          pkWithCustomName: primaryKey({ name: 'custom_name', columns: [table.bookId, table.authorId] }),
        };
      });
      ```

      ```sql {6, 9}
      ...

      CREATE TABLE IF NOT EXISTS "books_to_authors" (
        "author_id" integer,
        "book_id" integer,
        PRIMARY KEY("book_id","author_id"),
      );

      ALTER TABLE "books_to_authors" ADD CONSTRAINT "custom_name" PRIMARY KEY("book_id","author_id");
      ```
    </Section>

  </Tab> 
  <Tab>
    <Section>
      ```typescript {18, 19}
      import { int, text, primaryKey, mysqlTable } from "drizzle-orm/mysql-core";

      export const user = mysqlTable("user", {
        id: int("id").autoincrement().primaryKey(),
        name: text("name"),
      });

      export const book = mysqlTable("book", {
        id: int("id").autoincrement().primaryKey(),
        name: text("name"),
      });

      export const booksToAuthors = mysqlTable("books_to_authors", {
        authorId: int("author_id"),
        bookId: int("book_id"),
      }, (table) => {
        return {
          pk: primaryKey({ columns: [table.bookId, table.authorId] }),
          pkWithCustomName: primaryKey({ name: 'custom_name', columns: [table.bookId, table.authorId] }),
        };
      });
      ```

      ```sql {6}
      ...

      CREATE TABLE `books_to_authors` (
        `author_id` int,
        `book_id` int,
        PRIMARY KEY(`book_id`,`author_id`)
      );
      ```
    </Section>

  </Tab>
  <Tab>
   <Section>
      ```typescript copy {18, 19}
      import { integer, text, primaryKey, sqliteTable} from "drizzle-orm/sqlite-core";

      export const user = sqliteTable("user", {
        id: integer("id").primaryKey({ autoIncrement: true }),
        name: text("name"),
      });

      export const book = sqliteTable("book", {
        id: integer("id").primaryKey({ autoIncrement: true }),
        name: text("name"),
      });

      export const bookToAuthor = sqliteTable("book_to_author", {
        authorId: integer("author_id"),
        bookId: integer("book_id"),
      }, (table) => {
        return {
          pk: primaryKey({ columns: [table.bookId, table.authorId] }),
          pkWithCustomName: primaryKey({ name: 'custom_name', columns: [table.bookId, table.authorId] }),
        };
      });
      ```
      ```sql {6}
      ...

      CREATE TABLE `book_to_author` (
        `author_id` integer,
        `book_id` integer,
        PRIMARY KEY(`book_id`, `author_id`)
      );
      ```
    </Section>

  </Tab>
</Tabs>

### å¤–é”®

`FOREIGN KEY` çº¦æŸç”¨äºé˜²æ­¢ç ´åè¡¨ä¹‹é—´é“¾æ¥çš„æ“ä½œã€‚
`FOREIGN KEY` æ˜¯ä¸€ä¸ªå­—æ®µï¼ˆæˆ–ä¸€ç»„å­—æ®µï¼‰ï¼Œå®ƒå¼•ç”¨å¦ä¸€ä¸ªè¡¨ä¸­çš„ `PRIMARY KEY`ã€‚
å…·æœ‰å¤–é”®çš„è¡¨ç§°ä¸ºå­è¡¨ï¼Œå…·æœ‰ä¸»é”®çš„è¡¨ç§°ä¸ºå¼•ç”¨è¡¨æˆ–çˆ¶è¡¨ã€‚

Drizzle ORM æä¾›äº†å‡ ç§å£°æ˜å¤–é”®çš„æ–¹æ³•ã€‚
æ‚¨å¯ä»¥åœ¨åˆ—å£°æ˜è¯­å¥ä¸­å£°æ˜å®ƒä»¬ï¼š

<Tabs items={['PostgreSQL', 'MySQL', 'SQLite']}>
  <Tab>
    ```typescript copy {11}
    import { serial, text, integer, pgTable } from "drizzle-orm/pg-core";

    export const user = pgTable("user", {
      id: serial("id"),
      name: text("name"),
    });

    export const book = pgTable("book", {
      id: serial("id"),
      name: text("name"),
      authorId: integer("author_id").references(() => user.id)
    });
    ```

  </Tab>
  <Tab>
    ```typescript {11}
    import { int, text, mysqlTable } from "drizzle-orm/mysql-core";

    export const user = mysqlTable("user", {
      id: int("id").primaryKey().autoincrement(),
      name: text("name"),
    });

    export const book = mysqlTable("book", {
      id: int("id").primaryKey().autoincrement(),
      name: text("name"),
      authorId: int("author_id").references(() => user.id)
    });
    ```

  </Tab>
  <Tab>
    ```typescript {11}
    import { integer, text, sqliteTable } from "drizzle-orm/sqlite-core";

    export const user = sqliteTable("user", {
      id: integer("id").primaryKey({ autoIncrement: true }),
      name: text("name"),
    });

    export const book = sqliteTable("book", {
      id: integer("id").primaryKey({ autoIncrement: true }),
      name: text("name"),
      authorId: integer("author_id").references(() => user.id)
    });
    ```

  </Tab>
</Tabs>

å¦‚æœæ‚¨æƒ³è¿›è¡Œè‡ªå¼•ç”¨ï¼Œç”±äº TypeScript çš„é™åˆ¶ï¼Œæ‚¨å¿…é¡»æ˜¾å¼è®¾ç½®å¼•ç”¨å›è°ƒçš„è¿”å›ç±»å‹æˆ–ä½¿ç”¨ä¸€ä¸ªç‹¬ç«‹çš„ `foreignKey` è¿ç®—ç¬¦ã€‚

<Tabs items={['PostgreSQL', 'MySQL', 'SQLite']}>
  <Tab>
    ```typescript copy {6,16-19}
    import { serial, text, integer, foreignKey, pgTable, AnyPgColumn } from "drizzle-orm/pg-core";

    export const user = pgTable("user", {
      id: serial("id"),
      name: text("name"),
      parentId: integer("parent_id").references((): AnyPgColumn => user.id)
    });

    // or
    export const user = pgTable("user", {
      id: serial("id"),
      name: text("name"),
      parentId: integer("parent_id"),
    }, (table) => {
      return {
        parentReference: foreignKey({
          columns: [table.parentId],
          foreignColumns: [table.id],
          name: "custom_fk"
        }),
      };
    });
    ```
   
  </Tab>
  <Tab>
    ```typescript {6,16-19}
    import { int, text, foreignKey, AnyMySqlColumn, mysqlTable } from "drizzle-orm/mysql-core";

    export const user = mysqlTable("user", {
      id: int("id").primaryKey().autoincrement(),
      name: text("name"),
      parentId: int("parent_id").references((): AnyMySqlColumn => user.id),
    });

    // or
    export const user = mysqlTable("user", {
      id: int("id").primaryKey().autoincrement(),
      name: text("name"),
      parentId: int("parent_id")
    }, (table) => {
      return {
        parentReference: foreignKey({
          columns: [table.parentId],
          foreignColumns: [table.id],
          name: "custom_fk"
        }),
      };
    });
    ```
    
  </Tab>
  <Tab>
    ```typescript {6,16-19}
    import { integer, text, foreignKey, sqliteTable, AnySQLiteColumn } from "drizzle-orm/sqlite-core";

    export const user = sqliteTable("user", {
      id: integer("id").primaryKey({ autoIncrement: true }),
      name: text("name"),
      parentId: integer("parent_id").references((): AnySQLiteColumn => user.id)
    });

    //or
    export const user = sqliteTable("user", {
      id: integer("id").primaryKey({ autoIncrement: true }),
      name: text("name"),
      parentId: integer("parent_id"),
    }, (table) => {
      return {
        parentReference: foreignKey({
          columns: [table.parentId],
          foreignColumns: [table.id],
          name: "custom_fk"
        }),
      };
    });
    ```

  </Tab>
</Tabs>
è¦å£°æ˜å¤šåˆ—å¤–é”®ï¼Œå¯ä»¥ä½¿ç”¨ä¸“ç”¨çš„ `foreignKey` è¿ç®—ç¬¦ï¼š
<Tabs items={['PostgreSQL', 'MySQL', 'SQLite']}>
  <Tab>
    ```typescript copy {4-5,14-15,18-21}
    import { serial, text, foreignKey, pgTable, AnyPgColumn } from "drizzle-orm/pg-core";

    export const user = pgTable("user", {
      firstName: text("firstName"),
      lastName: text("lastName"),
    }, (table) => {
      return {
        pk: primaryKey({ columns: [table.firstName, table.lastName]}),
      };
    });

    export const profile = pgTable("profile", {
      id: serial("id").primaryKey(),
      userFirstName: text("user_first_name"),
      userLastName: text("user_last_name"),
    }, (table) => {
      return {
        userReference: foreignKey({
          columns: [table.userFirstName, table.userLastName],
          foreignColumns: [user.firstName, user.lastName]
          name: "custom_fk"
        })
      }
    })
    ```

  </Tab>
  <Tab>
    ```typescript copy {4-5,14-15,18-21}
    import { int, text, primaryKey, foreignKey, mysqlTable, AnyMySqlColumn } from "drizzle-orm/mysql-core";

    export const user = mysqlTable("user", {
      firstName: text("firstName"),
      lastName: text("lastName"),
    }, (table) => {
      return {
        pk: primaryKey({ columns: [table.firstName, table.lastName]}),
      };
    });

    export const profile = mysqlTable("profile", {
      id: int("id").autoincrement().primaryKey(),
      userFirstName: text("user_first_name"),
      userLastName: text("user_last_name"),
    }, (table) => {
      return {
        userReference: foreignKey({
          columns: [table.userFirstName, table.userLastName],
          foreignColumns: [user.firstName, user.lastName],
          name: "custom_name"
        })
      }
    });
    ```

  </Tab>
  <Tab>
    ```typescript {4-5,14-15,18-21}
    import { integer, text, primaryKey, foreignKey, sqliteTable, AnySQLiteColumn } from "drizzle-orm/sqlite-core";

    export const user = sqliteTable("user", {
      firstName: text("firstName"),
      lastName: text("lastName"),
    }, (table) => {
      return {
        pk: primaryKey({ columns: [table.firstName, table.lastName]}),
      };
    });

    export const profile = sqliteTable("profile", {
      id: integer("id").primaryKey({ autoIncrement: true }),
      userFirstName: text("user_first_name"),
      userLastName: text("user_last_name"),
    }, (table) => {
      return {
        userReference: foreignKey(() => ({
          columns: [table.userFirstName, table.userLastName],
          foreignColumns: [user.firstName, user.lastName],
          name: "custom_name"
        }))
      }
    });
    ```

  </Tab>
</Tabs>

## ç´¢å¼•

Drizzle ORM æä¾›äº†å¯¹ç´¢å¼•å’Œå”¯ä¸€ç´¢å¼•çš„ API å£°æ˜ï¼š

<Tabs items={['PostgreSQL', 'MySQL', 'SQLite']}>
  <Tab>
    <Section>
    ```typescript copy {9-10}
    import { serial, text, index, uniqueIndex, pgTable } from "drizzle-orm/pg-core";

    export const user = pgTable("user", {
      id: serial("id").primaryKey(),
      name: text("name"),
      email: text("email"),
    }, (table) => {
      return {
        nameIdx: index("name_idx").on(table.name),
        emailIdx: uniqueIndex("email_idx").on(table.email),
      };
    });
    ```
    ```sql {5-6}
    CREATE TABLE "user" (
      ...
    );

    CREATE INDEX "name_idx" ON "user" ("name");
    CREATE UNIQUE INDEX "email_idx" ON "user" ("email");
    ```
    </Section>
    <Callout type="warning" emoji="âš ï¸">
      ç›®å‰çš„ `drizzle-kit` åªæ”¯æŒç´¢å¼•çš„ `name` å’Œ `on()` å‚æ•°ã€‚
    </Callout>

    Drizzle ORM æä¾›äº†ç”¨äºç´¢å¼•åˆ›å»ºçš„æ‰€æœ‰å‚æ•°ï¼š

    ```typescript
    // Index declaration reference
    index('name')
      .on(table.column1, table.column2, ...) or .onOnly(table.column1, table.column2, ...)
      .concurrently()
      .using(sql``) // sql expression
      .asc() or .desc()
      .nullsFirst() or .nullsLast()
      .where(sql``) // sql expression
    ```

  </Tab>
  <Tab>
    <Section>
    ```typescript copy {9-10}
    import { int, text, index, uniqueIndex, mysqlTable } from "drizzle-orm/mysql-core";

    export const user = mysqlTable("user", {
      id: int("id").primaryKey().autoincrement(),
      name: text("name"),
      email: text("email"),
    }, (table) => {
      return {
        nameIdx: index("name_idx").on(table.name),
        emailIdx: uniqueIndex("email_idx").on(table.email),
      };
    });
    ```
    ```sql {5-6}
    CREATE TABLE `user` (
      ...
    );

    CREATE INDEX `name_idx` ON `user` (`name`);
    CREATE UNIQUE INDEX `email_idx` ON `user` (`email`);
    ```
    </Section>
    <Callout type="warning" emoji="âš ï¸">
      ç›®å‰çš„ `drizzle-kit` åªæ”¯æŒç´¢å¼•çš„ `name` å’Œ `on()` å‚æ•°ã€‚
    </Callout>

     Drizzle ORM æä¾›äº†ç”¨äºç´¢å¼•åˆ›å»ºçš„æ‰€æœ‰å‚æ•°ï¼š

    ```typescript
    // Index declaration reference
    index("name")
      .on(table.name)
      .algorythm("default") // "default" | "copy" | "inplace"
      .using("btree") // "btree" | "hash"
      .lock("default") // "none" | "default" | "exclusive" | "shared"
    ```
  </Tab>
  <Tab>
    <Section>
    ```typescript {9-10}
    import { integer, text, index, uniqueIndex, sqliteTable } from "drizzle-orm/sqlite-core";

    export const user = sqliteTable("user", {
      id: integer("id").primaryKey({ autoIncrement: true }),
      name: text("name"),
      email: text("email"),
    }, (table) => {
      return {
        nameIdx: index("name_idx").on(table.name),
        emailIdx: uniqueIndex("email_idx").on(table.email),
      };
    });
    ```
    ```sql {5-6}
    CREATE TABLE `user` (
      ...
    );

    CREATE INDEX `name_idx` ON `user` (`name`);
    CREATE UNIQUE INDEX `email_idx` ON `user` (`email`);
    ```
    </Section>
    <Callout type="warning" emoji="âš ï¸">
      ç›®å‰çš„ `drizzle-kit` åªæ”¯æŒç´¢å¼•çš„ `name` å’Œ `on()` å‚æ•°ã€‚
    </Callout>

     Drizzle ORM æä¾›äº†ç”¨äºç´¢å¼•åˆ›å»ºçš„æ‰€æœ‰å‚æ•°ï¼š
     
    ```typescript
    // ç´¢å¼•å£°æ˜å‚è€ƒ
    index("name")
      .on(table.name)
      .where(sql`...`)
    ```
  </Tab>
</Tabs>
