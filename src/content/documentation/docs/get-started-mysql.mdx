import Npm from '@components/markdown/Npm.astro';
import Callout from '@components/markdown/Callout.astro';
import Prerequisites from "@mdx/Prerequisites.astro";
import CodeTabs from "@mdx/CodeTabs.astro";
import WhatsNextPostgres from "@mdx/WhatsNextPostgres.astro";

# Drizzle \<\> MySQL

To use Drizzle with a MySQL database, you should use the `mysql2` driver

根据其 [官方网站](https://github.com/sidorares/node-mysql2) 描述，`mysql2` 是一个专注于性能的 Node.js MySQL 客户端。

Drizzle ORM 使用 `drizzle-orm/mysql2` 包原生支持 `mysql2`。

#### Step 1 - Install packages
<Npm>
drizzle-orm mysql2
-D drizzle-kit
</Npm>

#### Step 2 - Initialize the driver and make a query
<CodeTabs items={['mysql2', 'mysql with config']}>
```typescript copy
import { drizzle } from "drizzle-orm/connect";

const db = await drizzle("mysql2", process.env.DATABASE_URL);

const response = await db.select().from(...)
```
```typescript copy
import { drizzle } from "drizzle-orm/connect";

// You can specify any property from the mysql2 connection options
const db = await drizzle("mysql2", { connection:{ uri: process.env.DATABASE_URL }});

const response = await db.select().from(...)
```
</CodeTabs>

If you need a synchronous connection, you can use our additional connection API, where you specify a driver connection and pass it to the Drizzle instance.
There're two ways you can connect to the MySQL with `mysql2` driver, either single `client` connection or a `pool`.

<CodeTabs items={['Client connection', 'Pool connection']}>
  ```typescript copy
  import { drizzle } from "drizzle-orm/mysql2";
  import mysql from "mysql2/promise";

  const connection = await mysql.createConnection({
    host: "host",
    user: "user",
    database: "database",
    ...
  });

  const db = drizzle(connection);
  ```
  ```typescript copy
  import { drizzle } from "drizzle-orm/mysql2";
  import mysql from "mysql2/promise";

  const poolConnection = mysql.createPool({
    host: "host",
    user: "user",
    database: "database",
    ...
  });

  const db = drizzle(poolConnection);
  ```
</CodeTabs>

<Callout type="warning" emoji="⚙️">
对于带有 DDL 迁移的内置 `migrate()` 函数，我们和驱动程序强烈建议使用单个 `client` 连接连接到 MySQL。

对于查询目的，请根据业务需求随意使用 `client` 或 `pool`。
</Callout>

#### What's next?

<WhatsNextPostgres/>