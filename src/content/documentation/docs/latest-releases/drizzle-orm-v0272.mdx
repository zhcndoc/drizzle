---
title: DrizzleORM v0.27.2 å‘å¸ƒ
pubDate: 2023-07-12
description: åœ¨ PostgreSQLã€MySQLã€SQLite ä¸­æ·»åŠ å¯¹å”¯ä¸€çº¦æŸçš„æ”¯æŒã€‚
---

## ðŸŽ‰ åœ¨ PostgreSQLã€MySQLã€SQLite ä¸­æ·»åŠ å¯¹ `UNIQUE` çº¦æŸçš„æ”¯æŒ

å¯¹äºŽ PostgreSQLï¼Œå”¯ä¸€çº¦æŸå¯ä»¥åœ¨å•åˆ—çº¦æŸçš„åˆ—çº§åˆ«å®šä¹‰ï¼Œä¹Ÿå¯ä»¥åœ¨å¤šåˆ—çº¦æŸçš„ç¬¬ä¸‰ä¸ªå‚æ•°ä¸­å®šä¹‰ã€‚åœ¨ä¸¤ç§æƒ…å†µä¸‹ï¼Œéƒ½å¯ä»¥ä¸ºçº¦æŸå®šä¹‰ä¸€ä¸ªè‡ªå®šä¹‰åç§°ã€‚æ­¤å¤–ï¼ŒPostgreSQL å°†æŽ¥æ”¶ `NULLS NOT DISTINCT` é€‰é¡¹ï¼Œä»¥é™åˆ¶è¡¨ä¸­è¶…è¿‡ä¸€ä¸ª NULL å€¼ã€‚[å‚è€ƒé“¾æŽ¥](https://www.postgresql.org/docs/current/ddl-constraints.html#DDL-CONSTRAINTS-UNIQUE-CONSTRAINTS)

ä»¥ä¸‹ç¤ºä¾‹ä»…æ¼”ç¤ºä¸åŒçš„ `unique` ç”¨æ³•ã€‚è¯·ä¸è¦æœç´¢è¿™äº›è¡¨çš„çœŸå®žç”¨é€”ã€‚

```ts copy
// å•åˆ—
const table = pgTable('table', {
  id: serial('id').ä¸»é”®(),
  name: text('name').ä¸èƒ½ä¸ºç©º().å”¯ä¸€(),
  state: char('state', { length: 2 }).å”¯ä¸€('custom'),
  field: char('field', { length: 2 }).å”¯ä¸€('custom_field', { nulls: 'not distinct' }),
});
// å¤šåˆ—
const table = pgTable('table', {
  id: serial('id').ä¸»é”®(),
  name: text('name').ä¸èƒ½ä¸ºç©º(),
  state: char('state', { length: 2 }),
}, (t) => ({
  first: å”¯ä¸€('custom_name').åœ¨(t.name, t.state).ä¸åŒçš„ç©ºå€¼(),
  second: å”¯ä¸€('custom_name1').åœ¨(t.name, t.state),
}));
```

å¯¹äºŽ MySQLï¼Œé™¤äº† `NULLS NOT DISTINCT` é€‰é¡¹ä¹‹å¤–ï¼Œå…¶ä»–éƒ½ç›¸åŒã€‚ä¼¼ä¹Ž MySQL ä¸æ”¯æŒæ­¤é€‰é¡¹ã€‚

ä»¥ä¸‹ç¤ºä¾‹ä»…æ¼”ç¤ºä¸åŒçš„ `unique` ç”¨æ³•ã€‚è¯·ä¸è¦æœç´¢è¿™äº›è¡¨çš„çœŸå®žç”¨é€”ã€‚

```ts copy
// å•åˆ—
const table = mysqlTable('table', {
    id: serial('id').ä¸»é”®(),
    name: text('name').ä¸èƒ½ä¸ºç©º().å”¯ä¸€(),
    state: text('state').å”¯ä¸€('custom'),
    field: text('field').å”¯ä¸€('custom_field'),
});
// å¤šåˆ—
const table = mysqlTable('cities1', {
    id: serial('id').ä¸»é”®(),
    name: text('name').ä¸èƒ½ä¸ºç©º(),
    state: text('state'),
}, (t) => ({
    first: å”¯ä¸€().åœ¨(t.name, t.state),
    second: å”¯ä¸€('custom_name1').åœ¨(t.name, t.state),
}));
```

åœ¨ SQLite ä¸­ï¼Œå”¯ä¸€çº¦æŸä¸Žå”¯ä¸€ç´¢å¼•ç›¸åŒã€‚åªè¦æ‚¨å¯ä»¥ä¸ºå”¯ä¸€ç´¢å¼•æŒ‡å®šä¸€ä¸ªåç§°ï¼Œåœ¨å†…éƒ¨å®žçŽ°ä¸­ï¼Œæˆ‘ä»¬å°†æŠŠæ‰€æœ‰å”¯ä¸€çº¦æŸè§†ä¸ºå”¯ä¸€ç´¢å¼•ã€‚

```ts copy
// å•åˆ—
const table = sqliteTable('table', {
    id: int('id').ä¸»é”®(),
    name: text('name').ä¸èƒ½ä¸ºç©º().å”¯ä¸€(),
    state: text('state').å”¯ä¸€('custom'),
    field: text('field').å”¯ä¸€(),
});
// å¤šåˆ—
const table = sqliteTable('table', {
    id: int('id').ä¸»é”®(),
    name: text('name').ä¸èƒ½ä¸ºç©º(),
    state: text('state'),
}, (t) => ({
    first: å”¯ä¸€().åœ¨(t.name, t.state),
    second: å”¯ä¸€('custom').åœ¨(t.name, t.state),
}));
```
