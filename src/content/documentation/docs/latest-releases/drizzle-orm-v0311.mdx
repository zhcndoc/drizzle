---
title: DrizzleORM v0.31.1 å‘å¸ƒ
pubDate: 2024-06-04
description: React å®æ—¶æŸ¥è¯¢ ğŸ‰
---

# æ–°ç‰¹æ€§

## Live Queries ğŸ‰

> ### å¯¹äº Drizzle + Expo çš„å…¨é¢è§£é‡Šï¼Œæ¬¢è¿è®¿é—® [è®¨è®ºç‰ˆ](https://github.com/drizzle-team/drizzle-orm/discussions/2447)

æˆªè‡³ `v0.31.1`ï¼ŒDrizzle ORM ç°åœ¨æ”¯æŒ Expo SQLite Live Queries åŸç”Ÿæ”¯æŒï¼
æˆ‘ä»¬å·²ç»å®ç°äº†ä¸€ä¸ªåŸç”Ÿçš„ `useLiveQuery` React Hookï¼Œå®ƒè§‚å¯Ÿå¿…è¦çš„æ•°æ®åº“æ›´æ”¹å¹¶è‡ªåŠ¨é‡æ–°è¿è¡Œæ•°æ®åº“æŸ¥è¯¢ã€‚å®ƒä¸ SQL-like å’Œ Drizzle Queries éƒ½å…¼å®¹ï¼š

```tsx
import { useLiveQuery, drizzle } from 'drizzle-orm/expo-sqlite';
import { openDatabaseSync } from 'expo-sqlite/next';
import { users } from './schema';
import { Text } from 'react-native';

const expo = openDatabaseSync('db.db', { enableChangeListener: true }); // <-- å¯ç”¨æ›´æ”¹ç›‘å¬å™¨
const db = drizzle(expo);

const App = () => {
  // æ•°æ®æ›´æ”¹æ—¶è‡ªåŠ¨é‡æ–°æ¸²æŸ“
  const { data } = useLiveQuery(db.select().from(users));

  // const { data, error, updatedAt } = useLiveQuery(db.query.users.findFirst());
  // const { data, error, updatedAt } = useLiveQuery(db.query.users.findMany());


  return <Text>{JSON.stringify(data)}</Text>;
};

export default App;
```

æˆ‘ä»¬æœ‰æ„æ²¡æœ‰æ”¹å˜ ORM çš„ API ä»¥ä¿æŒä¸ä¼ ç»Ÿ React Hook API çš„å…¼å®¹æ€§ï¼Œå› æ­¤æˆ‘ä»¬æœ‰ `useLiveQuery(databaseQuery)`ï¼Œè€Œä¸æ˜¯ `db.select().from(users).useLive()` æˆ– `db.query.users.useFindMany()`

æˆ‘ä»¬è¿˜å†³å®šæä¾› `data`ã€`error` å’Œ `updatedAt` å­—æ®µä½œä¸ºé’©å­çš„ç»“æœï¼Œä»¥ä¾¿éµå¾ª `React Query` å’Œ `Electric SQL` çš„å®è·µè¿›è¡Œç®€æ´æ˜äº†çš„é”™è¯¯å¤„ç†ã€‚