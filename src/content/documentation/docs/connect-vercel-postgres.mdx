import Tab from '@components/markdown/Tab.astro';
import Tabs from '@components/markdown/Tabs.astro';
import Npm from "@components/markdown/Npm.astro";
import Callout from '@components/markdown/Callout.astro';
import Steps from '@components/markdown/Steps.astro';
import AnchorCards from '@components/markdown/AnchorCards.astro';
import Prerequisites from "@mdx/Prerequisites.astro";
import WhatsNextPostgres from "@mdx/WhatsNextPostgres.astro";

# Drizzle \<\> Vercel Postgres

<Prerequisites>
- 数据库 [连接基础](/docs/connect-overview) 与 Drizzle
- Vercel Postgres 数据库 - [网站](https://vercel.com/docs/storage/vercel-postgres)
- Vercel Postgres 驱动 - [文档](https://vercel.com/docs/storage/vercel-postgres/sdk) & [GitHub](https://github.com/vercel/storage/tree/main/packages/postgres)
- Drizzle PostgreSQL 驱动 - [文档](/docs/get-started-postgresql)
</Prerequisites>

根据他们的 **[官方网站](https://vercel.com/docs/storage/vercel-postgres)**，
Vercel Postgres 是一个无服务器 SQL 数据库，旨在与 Vercel Functions 集成。

Drizzle ORM 原生支持 **[@vercel/postgres](https://vercel.com/docs/storage/vercel-postgres)** 无服务器
驱动以及 `drizzle-orm/vercel-postgres` 包和 **[`postgres`](#postgresjs)** 或 **[`pg`](#node-postgres)**
驱动通过 `postgesql://` 访问 Vercel Postgres。

查看官方 **[Vercel Postgres + Drizzle](https://vercel.com/docs/storage/vercel-postgres/using-an-orm#drizzle)** 文档。

#### 步骤 1 - 安装包

<Npm>
drizzle-orm @vercel/postgres
-D drizzle-kit
</Npm>

#### 步骤 2 - 准备 Vercel Postgres

根据 **[官方文档](https://vercel.com/docs/storage/vercel-postgres/quickstart)** 设置项目。

#### 步骤 3 - 初始化驱动并进行查询

```typescript copy
import { drizzle } from 'drizzle-orm/vercel-postgres';

const db = drizzle();

const result = await db.execute('select 1');
```

如果您需要提供现有的驱动程序：

```typescript copy
import { sql } from '@vercel/postgres';
import { drizzle } from 'drizzle-orm/vercel-postgres';

const db = drizzle({ client: sql })

const result = await db.execute('select 1');
```

使用 **[@vercel/postgres](https://vercel.com/docs/storage/vercel-postgres)** 无服务器包
您可以通过 websockets 从无 TCP 可用的服务器和无服务器环境访问 Vercel Postgres，
如 Cloudflare Workers。
  
如果您打算从 _服务器_ 环境使用 Vercel Postgres，您可以选择使用 `@vercel/postgres` 
或直接通过 `postgesql://` 访问数据库，使用 
**[`postgres`](#postgresjs)** 或 **[`pg`](#node-postgres)**。

#### 接下来是什么？

<WhatsNextPostgres/>
