---
title: DrizzleORM v0.30.9 å‘å¸ƒ
pubDate: 2024-04-22
description: åœ¨ SQLite çš„ `.onConflictDoUpdate()` é…ç½®ä¸­æ·»åŠ äº† 'setWhere' å’Œ 'targetWhere' å­—æ®µï¼Œé€šè¿‡ 'db._.fullSchema' ä¸º Drizzle å®ä¾‹æ·»åŠ äº†æ¨¡å¼ä¿¡æ¯ï¼Œå¹¶ä¿®å¤äº† AWS æ•°æ® API ä¸­çš„è¿ç§»å™¨ã€‚
---

## æ–°ç‰¹æ€§

- åœ¨ SQLite çš„ `.onConflictDoUpdate()` é…ç½®ä¸­æ·»åŠ äº† `setWhere` å’Œ `targetWhere` å­—æ®µï¼Œå–ä»£å•ä¸€çš„ `where` å­—æ®µï¼š

```ts copy
await db.insert(employees)
  .values({ employeeId: 123, name: 'John Doe' })
  .onConflictDoUpdate({
    target: employees.employeeId,
    targetWhere: sql`name <> 'John Doe'`,
    set: { name: sql`excluded.name` }
  });
  
await db.insert(employees)
  .values({ employeeId: 123, name: 'John Doe' })
  .onConflictDoUpdate({
    target: employees.employeeId,
    set: { name: 'John Doe' },
    setWhere: sql`name <> 'John Doe'`
  });
```

æœ‰å…³ `.onConflictDoUpdate()` æ–¹æ³•çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·[ç‚¹å‡»è¿™é‡Œ](/docs/insert#on-conflict-do-update)ã€‚

- ğŸ› ï¸ é€šè¿‡ `db._.fullSchema` ä¸º Drizzle å®ä¾‹æ·»åŠ äº†æ¨¡å¼ä¿¡æ¯

## ä¿®å¤

- ä¿®å¤äº† AWS æ•°æ® API ä¸­çš„è¿ç§»å™¨

è¦å¼€å§‹ä½¿ç”¨ Drizzle å’Œ AWS æ•°æ® APIï¼Œè¯·å‚è€ƒ[æ–‡æ¡£](/docs/get-started-postgresql#aws-data-api)ã€‚
