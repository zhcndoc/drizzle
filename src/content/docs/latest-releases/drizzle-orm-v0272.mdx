---
title: DrizzleORM v0.27.2 å‘å¸ƒ
pubDate: 2023-07-12
description: å¢žåŠ äº†å¯¹ PostgreSQLã€MySQLã€SQLite ä¸­å”¯ä¸€çº¦æŸçš„æ”¯æŒã€‚
---

## ðŸŽ‰ å¢žåŠ äº†å¯¹ PostgreSQLã€MySQLã€SQLite ä¸­ `UNIQUE` çº¦æŸçš„æ”¯æŒ

å¯¹äºŽ PostgreSQLï¼Œå”¯ä¸€çº¦æŸå¯ä»¥åœ¨å•åˆ—çº¦æŸçš„åˆ—çº§åˆ«å®šä¹‰ï¼Œå¹¶åœ¨å¤šåˆ—çº¦æŸçš„ç¬¬ä¸‰ä¸ªå‚æ•°ä¸­å®šä¹‰ã€‚åœ¨è¿™ä¸¤ç§æƒ…å†µä¸‹ï¼Œéƒ½å¯ä»¥ä¸ºçº¦æŸå®šä¹‰ä¸€ä¸ªè‡ªå®šä¹‰åç§°ã€‚æ­¤å¤–ï¼ŒPostgreSQL å°†æä¾› `NULLS NOT DISTINCT` é€‰é¡¹ï¼Œä»¥é™åˆ¶è¡¨ä¸­åŒ…å«å¤šä¸ª NULL å€¼ã€‚[å‚è€ƒ](https://www.postgresql.org/docs/current/ddl-constraints.html#DDL-CONSTRAINTS-UNIQUE-CONSTRAINTS)

ä»¥ä¸‹ç¤ºä¾‹åªæ˜¯å±•ç¤ºäº†ä¸åŒçš„ `unique` ä½¿ç”¨æ–¹å¼ã€‚è¯·ä¸è¦æœç´¢è¿™äº›è¡¨çš„å®žé™…ä½¿ç”¨æƒ…å†µã€‚

```ts copy
// å•åˆ—
const table = pgTable('table', {
  id: serial('id').primaryKey(),
  name: text('name').notNull().unique(),
  state: char('state', { length: 2 }).unique('custom'),
  field: char('field', { length: 2 }).unique('custom_field', { nulls: 'not distinct' }),
});
// å¤šåˆ—
const table = pgTable('table', {
  id: serial('id').primaryKey(),
  name: text('name').notNull(),
  state: char('state', { length: 2 }),
}, (t) => ({
  first: unique('custom_name').on(t.name, t.state).nullsNotDistinct(),
  second: unique('custom_name1').on(t.name, t.state),
}));
```

å¯¹äºŽ MySQLï¼Œæ‰€æœ‰å†…å®¹ä¸Ž PostgreSQL ç›¸åŒï¼Œé™¤äº† `NULLS NOT DISTINCT` é€‰é¡¹ã€‚MySQL ä¼¼ä¹Žä¸æ”¯æŒæ­¤åŠŸèƒ½ã€‚

ä»¥ä¸‹ç¤ºä¾‹åªæ˜¯å±•ç¤ºäº†ä¸åŒçš„ `unique` ä½¿ç”¨æ–¹å¼ã€‚è¯·ä¸è¦æœç´¢è¿™äº›è¡¨çš„å®žé™…ä½¿ç”¨æƒ…å†µã€‚

```ts copy
// å•åˆ—
const table = mysqlTable('table', {
    id: serial('id').primaryKey(),
    name: text('name').notNull().unique(),
    state: text('state').unique('custom'),
    field: text('field').unique('custom_field'),
});
// å¤šåˆ—
const table = mysqlTable('cities1', {
    id: serial('id').primaryKey(),
    name: text('name').notNull(),
    state: text('state'),
}, (t) => ({
    first: unique().on(t.name, t.state),
    second: unique('custom_name1').on(t.name, t.state),
}));
```

åœ¨ SQLite ä¸­ï¼Œå”¯ä¸€çº¦æŸä¸Žå”¯ä¸€ç´¢å¼•ç›¸åŒã€‚åªè¦æ‚¨èƒ½å¤Ÿä¸º SQLite ä¸­çš„å”¯ä¸€ç´¢å¼•æŒ‡å®šä¸€ä¸ªåç§°ï¼Œæˆ‘ä»¬å°†åœ¨å†…éƒ¨å®žçŽ°ä¸­å°†æ‰€æœ‰å”¯ä¸€çº¦æŸè§†ä¸ºå”¯ä¸€ç´¢å¼•ã€‚

```ts copy
// å•åˆ—
const table = sqliteTable('table', {
    id: int('id').primaryKey(),
    name: text('name').notNull().unique(),
    state: text('state').unique('custom'),
    field: text('field').unique(),
});
// å¤šåˆ—
const table = sqliteTable('table', {
    id: int('id').primaryKey(),
    name: text('name').notNull(),
    state: text('state'),
}, (t) => ({
    first: unique().on(t.name, t.state),
    second: unique('custom').on(t.name, t.state),
}));
```
