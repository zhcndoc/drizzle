---
title: DrizzleORM v0.31.1 å‘å¸ƒ
pubDate: 2024-06-04
description: React å®æ—¶æŸ¥è¯¢ ğŸ‰
---

# æ–°ç‰¹æ€§

## å®æ—¶æŸ¥è¯¢ ğŸ‰

> ### å…³äº Drizzle + Expo çš„è¯¦ç»†è¯´æ˜æ¬¢è¿è®¿é—® [è®¨è®ºåŒº](https://github.com/drizzle-team/drizzle-orm/discussions/2447)

ä» `v0.31.1` å¼€å§‹ï¼ŒDrizzle ORM ç°åœ¨åŸç”Ÿæ”¯æŒ Expo SQLite å®æ—¶æŸ¥è¯¢ï¼
æˆ‘ä»¬å®ç°äº†ä¸€ä¸ªåŸç”Ÿçš„ `useLiveQuery` React Hookï¼Œè¯¥ Hook è§‚å¯Ÿå¿…è¦çš„æ•°æ®åº“æ›´æ”¹å¹¶è‡ªåŠ¨é‡æ–°è¿è¡Œæ•°æ®åº“æŸ¥è¯¢ã€‚å®ƒæ”¯æŒ SQL ç±»ä¼¼æŸ¥è¯¢å’Œ Drizzle æŸ¥è¯¢ï¼š

```tsx
import { useLiveQuery, drizzle } from 'drizzle-orm/expo-sqlite';
import { openDatabaseSync } from 'expo-sqlite';
import { users } from './schema';
import { Text } from 'react-native';

const expo = openDatabaseSync('db.db', { enableChangeListener: true }); // <-- å¯ç”¨æ›´æ”¹ç›‘å¬å™¨
const db = drizzle(expo);

const App = () => {
  // å½“æ•°æ®æ›´æ”¹æ—¶è‡ªåŠ¨é‡æ–°æ¸²æŸ“
  const { data } = useLiveQuery(db.select().from(users));

  // const { data, error, updatedAt } = useLiveQuery(db.query.users.findFirst());
  // const { data, error, updatedAt } = useLiveQuery(db.query.users.findMany());


  return <Text>{JSON.stringify(data)}</Text>;
};

export default App;
```

æˆ‘ä»¬æ•…æ„æ²¡æœ‰æ”¹å˜ ORM è‡ªèº«çš„ APIï¼Œä»¥ä¿æŒä¸å¸¸è§„ React Hook API ä¸€è‡´ï¼Œå› æ­¤æˆ‘ä»¬æœ‰ `useLiveQuery(databaseQuery)`ï¼Œè€Œä¸æ˜¯ `db.select().from(users).useLive()` æˆ– `db.query.users.useFindMany()`

æˆ‘ä»¬è¿˜å†³å®šæä¾› `data`ã€`error` å’Œ `updatedAt` å­—æ®µä½œä¸º Hook çš„ç»“æœï¼Œä»¥ä¾¿ç®€æ´æ˜ç¡®åœ°å¤„ç†é”™è¯¯ï¼Œéµå¾ª `React Query` å’Œ `Electric SQL` çš„å®è·µã€‚