import Callout from '@mdx/Callout.astro';
import CodeTabs from "@mdx/CodeTabs.astro";

在 `src/db` 目录下创建一个 `index.ts` 文件并初始化连接：

<CodeTabs items={['mysql2', 'mysql2 带配置', '你的 mysql2 驱动']}>
```typescript copy
import 'dotenv/config';
import { drizzle } from "drizzle-orm/singlestore";

const db = drizzle(process.env.DATABASE_URL);
```
```typescript copy
import 'dotenv/config';
import { drizzle } from "drizzle-orm/singlestore";

// 你可以指定 mysql2 连接选项中的任何属性
const db = drizzle({ connection: { uri: process.env.DATABASE_URL }});
```
```ts
import 'dotenv/config';
import { drizzle } from "drizzle-orm/singlestore";
import mysql from "mysql2/promise";
  
const poolConnection = mysql.createPool({
  host: "host",
  user: "user",
  database: "database",
});
const db = drizzle({ client: poolConnection });

// 或者如果你需要客户端连接
async function main() {
  const connection = await mysql.createConnection({
    host: "host",
    user: "user",
    database: "database",
  });
  const db = drizzle({ client: connection });
}
main();
```
</CodeTabs>

<Callout type="warning" emoji="⚙️">
  对于内置的带有 DDL 迁移的 `migrate` 功能，我们和驱动强烈建议你使用单个 `client` 连接。

  在查询时，可以根据你的业务需求自由选择使用 `client` 或基于连接池的 `pool`。
</Callout>