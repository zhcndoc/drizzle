import"./Tabs.astro_astro_type_script_index_0_lang.B-85WjlH.js";import"./hoisted.D9-N84rh.js";import{s as T,I as v}from"./AsideAstro.astro_astro_type_script_index_0_lang.0yeMkB_c.js";import"./CodeTabs.astro_astro_type_script_index_0_lang.DLFrxXsY.js";import"./index.Bel2lkwj.js";import"./index.DJO9vBfz.js";window.addEventListener("beforeunload",()=>{localStorage.setItem("sidebar-scroll","0")});const p={hero:{header:"Hero",emoji:"🦸",size:84,hasName:!0,hasCard:!0,columnSize:110,rowSize:134},gold:{header:"Gold",emoji:"🥇",size:70,hasName:!0,hasCard:!0,columnSize:110,rowSize:134},silver:{header:"Silver",emoji:"🥈",size:50,hasName:!0,hasCard:!1,columnSize:110,rowSize:134},bronze:{header:"Bronze",emoji:"🥉",size:42,hasName:!1,hasCard:!1,columnSize:110,rowSize:134},ramen:{header:"Ramen",emoji:"🍜",size:38,hasName:!1,hasCard:!1,columnSize:110,rowSize:134},coffee:{header:"Coffee",emoji:"☕️",size:35,hasName:!1,hasCard:!1,columnSize:110,rowSize:134},past:{header:"Past",emoji:"🕣",size:25,hasName:!1,hasCard:!1,columnSize:110,rowSize:134}};document.addEventListener("astro:page-load",async()=>{const l={unkeyed:"unkey.dev",wakatime:"wakatime.com",nodecraft:"nodecraft.com",devhuset:"devhuset.no",un:"driz.link/silver-sponsor-uninbox",encoredev:"driz.link/silver-sponsor-encore"},i={un:"Uninbox"},e=r=>Object.keys(r).reduce((a,c)=>a+`${c}: ${r[c]};`,""),s=await T(),d=document.querySelector("#sponsors-scroll"),h=(r,a)=>r.split("?")[0]+"?size="+a*2,t=document.querySelector("#sponsor-cards"),m=document.querySelector("#sponsor-card-with-name"),g=document.querySelector("#sponsor-card-without-name");t&&m&&g&&d&&s.forEach(r=>{if(r.items.length){const a=t.content.cloneNode(!0),c=a.querySelector("#header-text");c.textContent=`${p[r.name].header} sponsors`;const L=a.querySelector("#emoji");L.textContent=p[r.name].emoji;const k=a.querySelector("#cards-block");k.className=`${r.name} cards`,r.items.forEach(o=>{if(p[r.name].hasName){const u=m.content.cloneNode(!0),y=u.querySelector("#avatar-dark");o.imageType===v.IMAGE&&(y.src=o.sponsorEntity.avatarUrl),o.imageType===v.SVG&&(y.src="data:image/svg+xml;base64,"+btoa(o.sponsorEntity.avatarUrl)),o.imageType||(y.src=h(o.sponsorEntity.avatarUrl,p[r.name].size)),y.alt=o.sponsorEntity.name||o.sponsorEntity.login;const w=o.sponsorEntity.__typename==="User"?50:20;y.setAttribute("style",`border-radius: ${w}%; ${e(o.darkStyle||{})}`);const f=u.querySelector("#avatar-light");o.imageType===v.IMAGE&&(f.src=o.sponsorEntity.avatarUrl),o.imageType===v.SVG&&(f.src="data:image/svg+xml;base64,"+btoa(o.sponsorEntity.avatarUrl)),o.imageType||(f.src=h(o.sponsorEntity.avatarUrl,p[r.name].size)),f.alt=o.sponsorEntity.name||o.sponsorEntity.login,f.setAttribute("style",`border-radius: ${w}%; ${e(o.lightStyle||{})}`),u.querySelector("#img-wrapper").setAttribute("style",`width: ${p[r.name].size}px; height: ${p[r.name].size}px`);const S=u.querySelector("#git-link");o.imageType?S.href=`https://${o.sponsorEntity.login}`:l[o.sponsorEntity.login]?S.href=`https://${l[o.sponsorEntity.login]}`:S.href=`https://github.com/${o.sponsorEntity.login}`,S.rel=o.followLink?"":"nofollow";const z=u.querySelector("#card-name");o.sponsorEntity.name?(z.textContent=i[o.sponsorEntity.login]||o.sponsorEntity.name,o.sponsorEntity.name==="SQLite Cloud"&&(z.style.fontSize="12px")):z.textContent=o.sponsorEntity.__typename==="User"?"@"+o.sponsorEntity.login:""+o.sponsorEntity.login;const E=u.querySelector("#card-wrapper");if(E.classList.add("with_name"),p[r.name].hasCard){if(o.popover){E.classList.add("styled_card_with_popover");const C=E.querySelector(".popover");C&&(C.innerHTML=o.popover)}E.classList.add("styled_card")}k.append(u)}else{const u=g.content.cloneNode(!0),y=u.querySelector("#avatar-dark"),w=o.sponsorEntity.__typename==="User"?50:20;y.setAttribute("style",`border-radius: ${w}%`),y.setAttribute("style",`border-radius: ${w}%; ${e(o.darkStyle||{})}`),o.imageType===v.IMAGE&&(y.src=o.sponsorEntity.avatarUrl),o.imageType===v.SVG&&(y.src="data:image/svg+xml;base64,"+btoa(o.sponsorEntity.avatarUrl)),o.imageType||(y.src=h(o.sponsorEntity.avatarUrl,p[r.name].size)),y.alt=o.sponsorEntity.name||o.sponsorEntity.login;const f=u.querySelector("#avatar-light");f.setAttribute("style",`border-radius: ${w}%`),f.setAttribute("style",`border-radius: ${w}%; ${e(o.lightStyle||{})}`),o.imageType===v.IMAGE&&(f.src=o.sponsorEntity.avatarUrl),o.imageType===v.SVG&&(f.src="data:image/svg+xml;base64,"+btoa(o.sponsorEntity.avatarUrl)),o.imageType||(f.src=h(o.sponsorEntity.avatarUrl,p[r.name].size)),f.alt=o.sponsorEntity.name||o.sponsorEntity.login,u.querySelector("#img-wrapper").setAttribute("style",`width: ${p[r.name].size}px; height: ${p[r.name].size}px`);const S=u.querySelector("#git-link");o.imageType?S.href=`https://${o.sponsorEntity.login}`:l[o.sponsorEntity.login]?S.href=`https://${l[o.sponsorEntity.login]}`:S.href=`https://github.com/${o.sponsorEntity.login}`,S.rel=o.followLink?"":"nofollow",k.append(u)}}),d.append(a)}})});const n={bodyVertical:[[0,1,1,0],[0,0,1,0],[0,1,0,0],[0,1,1,0]],bodyVerticalWithFood:[[0,1,1,0],[1,0,1,1],[1,1,0,1],[0,1,1,0]],bodyHorizontal:[[0,0,0,0],[1,1,0,1],[1,0,1,1],[0,0,0,0]],bodyHorizontalWithFood:[[0,1,1,0],[1,1,0,1],[1,0,1,1],[0,1,1,0]],tailLeft:[[0,0,0,0],[1,1,0,0],[1,1,1,1],[0,0,0,0]],tailRight:[[0,0,0,0],[0,0,1,1],[1,1,1,1],[0,0,0,0]],tailUp:[[0,1,1,0],[0,1,1,0],[0,0,1,0],[0,0,1,0]],tailDown:[[0,0,1,0],[0,0,1,0],[0,1,1,0],[0,1,1,0]],headLeft:[[0,0,1,0],[1,1,0,1],[1,1,1,1],[0,0,0,0]],headLeftFood:[[1,0,1,0],[0,1,0,1],[0,1,1,1],[1,0,0,0]],headRight:[[0,1,0,0],[1,0,1,1],[1,1,1,1],[0,0,0,0]],headRightFood:[[0,1,0,1],[1,0,1,0],[1,1,1,0],[0,0,0,1]],headUp:[[0,1,1,0],[0,1,1,0],[1,0,1,0],[0,1,1,0]],headUpFood:[[1,0,0,1],[0,1,1,0],[1,0,1,0],[0,1,1,0]],headDown:[[0,1,1,0],[1,0,1,0],[0,1,1,0],[0,1,1,0]],headDownFood:[[0,1,1,0],[1,0,1,0],[0,1,1,0],[1,0,0,1]],turnBottomRight:[[0,1,1,0],[1,0,1,0],[1,1,0,0],[0,0,0,0]],turnBottomRightWithFood:[[1,1,1,0],[1,0,1,0],[1,1,0,0],[0,0,0,0]],turnTopRight:[[0,0,0,0],[1,1,0,0],[1,0,1,0],[0,1,1,0]],turnTopRightWithFood:[[0,0,0,0],[1,1,0,0],[1,0,1,0],[1,1,1,0]],turnBottomLeft:[[0,1,1,0],[0,1,0,1],[0,0,1,1],[0,0,0,0]],turnBottomLeftWithFood:[[0,1,1,1],[0,1,0,1],[0,0,1,1],[0,0,0,0]],turnTopLeft:[[0,0,0,0],[0,0,1,1],[0,1,0,1],[0,1,1,0]],turnTopLeftWithFood:[[0,0,0,0],[0,0,1,1],[0,1,0,1],[0,1,1,1]],food:[[0,1,0,0],[1,0,1,0],[0,1,0,0],[0,0,0,0]]},I=({snake:l,gridWidth:i,gridHeight:e,food:s,eatenFood:d,superFood:h})=>l.map((t,m,g)=>{const r=g[m+1],a=g[m-1],c=d.some(({x:L,y:k})=>L===t.x&&k===t.y);if(m===0){if(t.x===r.x){if(t.y-r.y===-1||t.y===e-1&&r.y===0)return s.x===t.x&&s.y-t.y===-1||h?.x===t.x&&h?.y-t.y===-1?{...t,segment:n.headUpFood}:{...t,segment:n.headUp};if(t.y-r.y===1||t.y===0&&r.y===e-1)return s.x===t.x&&s.y-t.y===1||h?.x===t.x&&h?.y-t.y===1?{...t,segment:n.headDownFood}:{...t,segment:n.headDown}}if(t.y===r.y){if(t.x-r.x===-1||t.x===i-1&&r.x===0)return s.y===t.y&&s.x-t.x===-1||h?.y===t.y&&h?.x-t.x===-1?{...t,segment:n.headLeftFood}:{...t,segment:n.headLeft};if(t.x-r.x===1||t.x===0&&r.x===i-1)return s.y===t.y&&s.x-t.x===1||h?.y===t.y&&h?.x-t.x===1?{...t,segment:n.headRightFood}:{...t,segment:n.headRight}}}if(m===g.length-1){if(t.x===a.x){if(t.y-a.y===-1||t.y===e-1&&a.y===0)return{...t,segment:n.tailDown};if(t.y-a.y===1||t.y===0&&a.y===e-1)return{...t,segment:n.tailUp}}if(t.y===a.y){if(t.x-a.x===-1||t.x===i-1&&a.x===0)return{...t,segment:n.tailRight};if(t.x-a.x===1||t.x===0&&a.x===i-1)return{...t,segment:n.tailLeft}}}if(t.x===r.x&&t.x===a.x)return{...t,segment:c?n.bodyVerticalWithFood:n.bodyVertical};if(t.y===r.y&&t.y===a.y)return{...t,segment:c?n.bodyHorizontalWithFood:n.bodyHorizontal};if(t.x-r.x===1||r.x===i-1&&t.x===0){if(a.y-t.y===1||t.y===e-1&&a.y===0)return{...t,segment:c?n.turnTopRightWithFood:n.turnTopRight};if(a.y-t.y===-1||t.y===0&&a.y===e-1)return{...t,segment:c?n.turnBottomRightWithFood:n.turnBottomRight}}if(t.x-r.x===-1||r.x===0&&t.x===i-1){if(a.y-t.y===1||t.y===e-1&&a.y===0)return{...t,segment:c?n.turnTopLeftWithFood:n.turnTopLeft};if(a.y-t.y===-1||t.y===0&&a.y===e-1)return{...t,segment:c?n.turnBottomLeftWithFood:n.turnBottomLeft}}if(t.y-r.y===1||r.y===e-1&&t.y===0){if(a.x-t.x===1||t.x===i-1&&a.x===0)return{...t,segment:c?n.turnBottomLeftWithFood:n.turnBottomLeft};if(a.x-t.x===-1||t.x===0&&a.x===i-1)return{...t,segment:c?n.turnBottomRightWithFood:n.turnBottomRight}}if(t.y-r.y===-1||r.y===0&&t.y===e-1){if(a.x-t.x===1||t.x===i-1&&a.x===0)return{...t,segment:c?n.turnTopLeftWithFood:n.turnTopLeft};if(a.x-t.x===-1||t.x===0&&a.x===i-1)return{...t,segment:c?n.turnTopRightWithFood:n.turnTopRight}}return{...t,segment:n.bodyVertical}}),b={1:{speed:208,multiplier:3},2:{speed:104,multiplier:6},3:{speed:72,multiplier:9}},G=(l,i)=>{const e=[];for(let s=0;s<i;s++)for(let d=0;d<l;d++)e.push({x:d,y:s});return e};class B{canvas;ctx;snake;food;tileSize;isPaused;scale;gridWidth;gridHeight;eatenFood;gameOver;directionQueue;score;difficulty;gridCoordinates;superFoodImage;superFood;superFoodCount;eatenFoodCount;smallSquareCount;smallSquareSize;constructor(){this.isPaused=!0,this.canvas=document.getElementById("gameCanvas"),this.ctx=this.canvas.getContext("2d"),this.tileSize=16,this.gridHeight=10,this.gridWidth=19,this.snake=this.createInitialSnake(5),this.directionQueue=["RIGHT"],this.scale=window.devicePixelRatio*2,this.food={x:16,y:2},this.eatenFoodCount=0,this.superFood=null,this.superFoodCount=0,this.eatenFood=[],this.score=0,this.gameOver=!0,this.difficulty=2,this.smallSquareCount=4,this.smallSquareSize=4,this.gridCoordinates=G(this.gridWidth,this.gridHeight),this.superFoodImage=new Image,this.superFoodImage.src="/images/db.svg",window.addEventListener("resize",this.resizeCanvas.bind(this)),document.addEventListener("keydown",this.changeDirection.bind(this)),document.addEventListener("astro:page-load",()=>{document.getElementById("gameCanvas")&&(this.canvas=document.getElementById("gameCanvas"),this.ctx=this.canvas.getContext("2d"),this.resizeCanvas(),this.redraw(),this.gameOver=!0,this.resetGame())})}startGame(){this.changeScore(0),this.gameOver=!1,this.gameLoop()}createInitialSnake(i){const e=[];for(let s=0;s<i;s++)e.push({x:i-s,y:2});return e}resizeCanvas(){const i=document.querySelector(".header-right"),e=document.getElementById("gameArea"),s=this.isPaused;if(this.isPaused=i?window.getComputedStyle(i).display==="none":!0,s&&!this.isPaused&&this.gameLoop(),e){const d=e.getBoundingClientRect();this.canvas.width=d.width*this.scale,this.canvas.height=d.height*this.scale,this.canvas.style.width=`${d.width}px`,this.canvas.style.height=`${d.height}px`,this.ctx.scale(this.scale,this.scale),this.redraw()}}redraw(){this.clearCanvas(),this.drawSnake(),this.drawFood(),this.drawGrid(),this.drawSuperFood()}generateFood(){const i=new Set(this.snake.map(d=>`${d.x},${d.y}`));let e=this.gridCoordinates.filter(d=>!i.has(`${d.x},${d.y}`));e.length===1&&(this.gameOver=!0,this.blinkFood());const s=e[Math.floor(Math.random()*e.length)];this.food=s,this.eatenFoodCount===5&&(e=e.filter(d=>d.x!==s.x&&d.y!==s.y),this.superFood=e[Math.floor(Math.random()*e.length)],this.superFoodCount=20,this.eatenFoodCount=0)}changeDirection(i){if(this.isPaused||this.gameOver)return;window.addEventListener("keydown",F,!1),document.getElementById("right-image")?.classList.add("right-image-moved"),document.querySelector(".board")?.classList.add("board-moved"),document.querySelector("#score")?.classList.remove("hidden");const e=i.key,s=this.directionQueue[this.directionQueue.length-1];e==="ArrowLeft"&&s!=="RIGHT"?this.enqueueDirection("LEFT"):e==="ArrowUp"&&s!=="DOWN"?this.enqueueDirection("UP"):e==="ArrowRight"&&s!=="LEFT"?this.enqueueDirection("RIGHT"):e==="ArrowDown"&&s!=="UP"&&this.enqueueDirection("DOWN")}enqueueDirection(i){this.directionQueue.length<3&&this.directionQueue.push(i)}gameLoop(){setTimeout(()=>{!this.isPaused&&!this.gameOver&&(this.moveSnake(),this.countdownSuperFood(),this.redraw(),this.checkGameOver(),this.gameLoop())},b[this.difficulty].speed)}countdownSuperFood(){if(!this.superFoodCount){this.superFood=null,document.querySelector(".countdown")?.classList?.add("hidden");return}document.getElementById("countdown").innerText=this.superFoodCount.toString(),document.querySelector(".countdown").classList.remove("hidden"),this.superFoodCount--}clearCanvas(){this.ctx.fillStyle="#f0f0f0",this.ctx.fillRect(0,0,this.canvas.width/this.scale,this.canvas.height/this.scale)}drawSuperFood(){this.superFood&&this.ctx.drawImage(this.superFoodImage,this.superFood.x*this.tileSize,this.superFood.y*this.tileSize,this.tileSize,this.tileSize)}drawFood(){this.drawSegment(n.food,{...this.food})}moveSnake(){const i=this.directionQueue[0],e={x:this.snake[0].x,y:this.snake[0].y};i==="RIGHT"?e.x+=1:i==="LEFT"?e.x-=1:i==="UP"?e.y-=1:i==="DOWN"&&(e.y+=1),e.x===this.gridWidth?e.x=0:e.x<0&&(e.x=this.gridWidth-1),e.y===this.gridHeight?e.y=0:e.y<0&&(e.y=this.gridHeight-1),this.snake.unshift(e),this.eatenFood=[...this.eatenFood.filter(s=>this.snake.some(({x:d,y:h})=>d===s.x&&h===s.y))],e.x===this.food.x&&e.y===this.food.y?(this.eatenFood.unshift({...this.food}),this.eatenFoodCount++,this.generateFood(),this.changeScore(this.score+b[this.difficulty].multiplier)):this.superFood&&e.x===this.superFood.x&&e.y===this.superFood.y?(this.eatenFood.unshift({...this.superFood}),this.eatenFoodCount=0,this.superFood=null,this.superFoodCount=0,this.changeScore(this.score+5*b[this.difficulty].multiplier)):this.snake.pop(),this.directionQueue.length>1&&this.directionQueue.shift()}changeScore(i){document.getElementById("score").innerText=i.toString().padStart(4,"0"),this.score=i}drawSnake(){I({snake:this.snake,gridHeight:this.gridHeight,gridWidth:this.gridWidth,food:this.food,eatenFood:this.eatenFood,superFood:this.superFood||void 0}).forEach(({x:i,y:e,segment:s})=>{this.drawSegment(s,{x:i,y:e})})}drawDebugGrid(){this.ctx.strokeStyle="#000",this.ctx.lineWidth=1;for(let i=1;i<this.gridWidth;i++)this.ctx.moveTo(i*this.tileSize,0),this.ctx.lineTo(i*this.tileSize,this.gridHeight*this.tileSize),this.ctx.stroke();for(let i=1;i<this.gridHeight;i++)this.ctx.moveTo(0,i*this.tileSize),this.ctx.lineTo(this.gridWidth*this.tileSize,i*this.tileSize),this.ctx.stroke()}drawGrid(){this.ctx.strokeStyle="#f0f0f0",this.ctx.lineWidth=.33;for(let i=1;i<this.gridWidth*this.smallSquareCount;i++)this.ctx.beginPath(),this.ctx.moveTo(i*this.smallSquareSize,0),this.ctx.lineTo(i*this.smallSquareSize,this.gridHeight*this.tileSize),this.ctx.stroke();for(let i=1;i<this.gridHeight*this.smallSquareCount;i++)this.ctx.beginPath(),this.ctx.moveTo(0,i*this.smallSquareSize),this.ctx.lineTo(this.gridWidth*this.tileSize,i*this.smallSquareSize),this.ctx.stroke()}drawSegment(i,e){this.ctx.fillStyle="#f0f0f0",this.ctx.fillRect(e.x*16,e.y*16,this.tileSize,this.tileSize);const s=e.x*16,d=e.y*16;this.ctx.fillStyle="#000";for(let h=0;h<this.smallSquareCount;h++)for(let t=0;t<this.smallSquareCount;t++)if(i[h][t]){const m=s+t*this.smallSquareSize,g=d+h*this.smallSquareSize;this.ctx.fillRect(m,g,this.smallSquareSize,this.smallSquareSize)}}checkGameOver(){const i=this.snake[0];for(let e=1;e<this.snake.length;e++)i.x===this.snake[e].x&&i.y===this.snake[e].y&&(this.gameOver=!0,this.blinkSnake())}blinkSnake(){let i=0;const e=setInterval(()=>{i<10?(this.clearCanvas(),this.drawFood(),i%2===0&&this.drawSnake(),this.drawGrid(),this.drawSuperFood(),i++):(clearInterval(e),this.resetGame())},200)}blinkFood(){let i=0;const e=setInterval(()=>{i<10?(this.clearCanvas(),this.drawSnake(),i%2===0&&this.drawFood(),this.drawGrid(),i++):(clearInterval(e),this.resetGame())},200)}resetGame(){document.querySelector(".game-start-screen")?.classList.remove("hidden"),document.querySelector(".countdown")?.classList.add("hidden"),this.snake=this.createInitialSnake(5),this.directionQueue=["RIGHT"],this.eatenFood=[],this.eatenFoodCount=0,this.superFood=null,this.superFoodCount=0,this.food={x:16,y:2},this.redraw()}}const x=new B,R=()=>{switch(x.difficulty){case 1:document.getElementById("game-difficulty").innerText="Normal",x.difficulty=2;break;case 2:document.getElementById("game-difficulty").innerText="Hard",x.difficulty=3;break;case 3:document.getElementById("game-difficulty").innerText="Easy",x.difficulty=1;break}},F=l=>{["Space","ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].indexOf(l.code)>-1&&l.preventDefault()},W=()=>{document.querySelector(".game-start-screen").classList.add("hidden"),document.getElementById("right-image").classList.add("right-image-moved"),document.getElementById("score").classList.remove("hidden"),document.querySelector(".board").classList.add("board-moved"),window.addEventListener("keydown",F,!1),x.startGame()};window.addEventListener("keydown",l=>{if(l.code==="Escape"){const i=document.getElementById("right-image"),e=document.querySelector(".board"),s=document.querySelector("#score"),d=document.querySelector(".countdown");e&&i&&s&&d&&(l.preventDefault(),x.gameOver=!0,x.resetGame(),window.removeEventListener("keydown",F,!1),e.classList.remove("board-moved"),i.classList.remove("right-image-moved"),s.classList.add("hidden"),d.classList.add("hidden"))}},!1);document.addEventListener("astro:before-swap",()=>{x.gameOver=!0,x.resetGame(),window.removeEventListener("keydown",F,!1)});document.addEventListener("astro:page-load",()=>{document.querySelector("main").addEventListener("scroll",()=>{const l=document.getElementById("right-image"),i=document.querySelector(".board"),e=document.querySelector("#score"),s=document.querySelector(".countdown");i?.classList.remove("board-moved"),l?.classList.remove("right-image-moved"),e?.classList.add("hidden"),s?.classList.add("hidden")},!1),document.getElementById("start-game")?.addEventListener("click",W),document.getElementById("change-difficulty")?.addEventListener("click",R)});
